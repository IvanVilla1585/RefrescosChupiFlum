{% extends "base.html" %}
{% load staticfiles %}
{% block content %}
<form action="{% url 'productos:crear' %}" id="formulario_produ" method="POST">
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-success" id="alert-messages">
        <button id="message_close" type="button" data-dismiss="alert" aria-hidden="true" class="close">Ã—</button>
        <i class="material-icons sign md-icon dp48">check</i>
        <strong>{{ message }}</strong>
      </div>
    {% endfor %}
  {% endif %}
  {% csrf_token %}
  <input type="hidden" name="page" value="productos">

  <div class="row inputs">
    <div class="col m10">
      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.nombre }}
          {{ form.nombre.label_tag }}
          {{ form.nombre.errors  }}
        </div>
        <div class="input-field col s12 m6">
          {{ form.descripcion }}
          {{ form.descripcion.label_tag }}
          {{ form.descripcion.errors  }}
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.categoria }}
          {{ form.categoria.label_tag }}
          {{ form.categoria.errors  }}
        </div>
        <div class="input-field col s12 m6">
          {{ form.costo_produccion }}
          {{ form.costo_produccion.label_tag }}
          {{ form.costo_produccion.errors  }}
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.precio_venta }}
          {{ form.precio_venta.label_tag }}
          {{ form.precio_venta.errors  }}
        </div>
        <div class="input-field col s12 m6">
          {{ form.cantidad }}
          {{ form.cantidad.label_tag }}
          {{ form.cantidad.errors  }}
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m6">
          {{ form.cantidad_productos }}
          {{ form.cantidad_productos.label_tag }}
          {{ form.cantidad_productos.errors  }}
        </div>
        <div class="input-field col s12 m6">
          {{ form.presentacion }}
          {{ form.presentacion.label_tag }}
          {{ form.presentacion.errors  }}
        </div>
      </div>
      <div class="row">
        <div class="col s12">
          <table >
            {{ detalle_formula.management_form }}
            {% for form in detalle_formula.forms %}
              {% if forloop.first %}
                <thead>
                  <tr>
                      {% for field in form.visible_fields %}
                          <th>{{ field.label|capfirst }}</th>
                      {% endfor %}
                  </tr>
                </thead>
              {% endif %}
              <tr class="formset_row">
                {% for field in form.visible_fields %}
                  <td>
                    {# Include the hidden fields in the form #}
                    {% if forloop.first %}
                        {% for hidden in form.hidden_fields %}
                            {{ hidden }}
                        {% endfor %}
                    {% endif %}
                    {{ field }}
                    {{ field.errors.a }}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </table>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m6">
          <div class="switch">
            <label>
              Inactivo {{ form.estado }}
              <span class="lever"></span>
              Activo
            </label>
          </div>
        </div>
        <div class="input-field col s12 m6">
          {{ form.stock }}
          {{ form.stock.label_tag }}
          {{ form.stock.errors  }}
        </div>
      </div>
    </div>
    <div class="col m2">
      <div class="center">
        <button type="submit" style="margin: 1em 0;" class="btn-floating btn-large waves-effect waves-light red md-icon dp48 tooltipped" name="guardarProd" data-position="left" data-delay="50" data-tooltip="Guardar"><i class="material-icons">save</i>Left</button>
      </div>
      <div class="center">
        <button type="submit" style="margin: 1em 0;" class="btn-floating btn-large waves-effect waves-light red md-icon dp48 tooltipped" id="buscarProd" name="buscarProd" data-position="left" data-delay="50" data-tooltip="Buscar"><i class="material-icons">search</i>Left</button>
      </div>
      <div class="center">
        <button type="submit" style="margin: 1em 0;" class="btn-floating btn-large waves-effect waves-light red tooltipped" id="modificarProd" name="modificarProd" data-position="left" data-delay="50" data-tooltip="Modificar"><i class="material-icons">add</i>Left</button>
      </div>
      <div class="center">
        <button type="submit" style="margin: 1em 0;" class="btn-floating btn-large waves-effect waves-light red md-icon dp48 tooltipped" id="eliminarProd" name="eliminarProd" data-position="left" data-delay="50" data-tooltip="Eliminar"><i class="material-icons">cancel</i>Left</button>
      </div>
      <div class="center">
        <a type="submit" href="/MenuPrincipal/Productos/Listar/" class="btn-floating btn-large waves-effect waves-light red md-icon dp48 tooltipped" id="listarProd" name="listarProd" data-position="left" data-tooltip="Listar" ><i class="material-icons">assignment</i>Left</a>
      </div>
    </div>
  </div>
</form>

{% endblock %}
{% block content_modal %}

<div id="modal-alert" class="modal">
  <div class="modal-content">
    <div class="logo">
      <figure>
        <img src="/static/images/logo.png" alt="">
      </figure>
    </div>
    <h2 id="title_modal" class="title_modal"></h2>
    <p id="text-modal" class="text-modal"></p>
    <div class="errors" id="errors"></div>
    <div class="row inputs input_consulta" id="input_consulta">
      <div class="input-field col s10">
        <div class="ui-widget">
          <input type="text" placeholder="" id="consulta_nom" name="consulta_nom">
        </div>
        <input type="hidden" placeholder="" id="id_producto" name="id_producto">
      </div>
    </div>
      <div class="input-field col s10">
      </div>
    </div>
  <div class="modal-footer">
    <button id="cancelar_pro" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancelar</button>
    <button id="consultar_pro" class=" modal-action modal-close waves-effect waves-green btn-flat">Consultar</button>
  </div>
</div>
{% endblock %}

{% block js %}
  <script src="{% static 'js/jquery.forminline.js' %}"></script>
  <script type="text/javascript">
    $('.formset_row').formset({
      addText: 'agregar materia',
      addCssClass: 'btn waves-effect waves-light',
      deleteText: 'eliminar',
      prefix: 'detalles_formulas_set'
    });
  </script>
{% endblock %}
